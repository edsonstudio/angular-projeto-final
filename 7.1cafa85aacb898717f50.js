(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{xw52:function(e,t,r){"use strict";r.r(t),r.d(t,"ProdutoModule",function(){return Se});var i=r("ofXK"),n=r("3Pt+"),o=r("PsUo"),a=r("904P"),s=r("JqCM"),c=r("fXoL");function p(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(t){o(t)}}function s(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})}var d=r("jhN1");const l=["wrapper"],h=["sourceImage"];function m(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"img",4,5),c["\u0275\u0275listener"]("load",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().imageLoadedInView()}),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275styleProp"]("visibility",e.imageVisible?"visible":"hidden")("transform",e.safeTransformStyle),c["\u0275\u0275property"]("src",e.safeImgDataUrl,c["\u0275\u0275sanitizeUrl"])}}function g(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementContainerStart"](0),c["\u0275\u0275elementStart"](1,"span",9),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"topleft")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"topleft")}),c["\u0275\u0275element"](2,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"span",11),c["\u0275\u0275element"](4,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"span",12),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"topright")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"topright")}),c["\u0275\u0275element"](6,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"span",13),c["\u0275\u0275element"](8,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"span",14),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"bottomright")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"bottomright")}),c["\u0275\u0275element"](10,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"span",15),c["\u0275\u0275element"](12,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"span",16),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"bottomleft")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"bottomleft")}),c["\u0275\u0275element"](14,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"span",17),c["\u0275\u0275element"](16,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"span",18),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"top")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"top")}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"span",19),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"right")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"right")}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"span",20),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"bottom")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"bottom")}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"span",21),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"left")})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"](2);return r.startMove(t,r.moveTypes.Resize,"left")}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerEnd"]()}}function u(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",6),c["\u0275\u0275listener"]("keydown",function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().keyboardAccess(t)}),c["\u0275\u0275elementStart"](1,"div",7),c["\u0275\u0275listener"]("mousedown",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"]();return r.startMove(t,r.moveTypes.Move)})("touchstart",function(t){c["\u0275\u0275restoreView"](e);const r=c["\u0275\u0275nextContext"]();return r.startMove(t,r.moveTypes.Move)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](2,g,21,0,"ng-container",8),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275styleProp"]("top",e.cropper.y1,"px")("left",e.cropper.x1,"px")("width",e.cropper.x2-e.cropper.x1,"px")("height",e.cropper.y2-e.cropper.y1,"px")("margin-left","center"===e.alignImage?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),c["\u0275\u0275classProp"]("rounded",e.roundCropper),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!e.hideResizeSquares)}}const f={Move:"move",Resize:"resize",Pinch:"pinch"};let x=(()=>{class e{crop(e,t,r,i){const n=this.getImagePosition(e,t,r,i),o=n.x2-n.x1,a=n.y2-n.y1,s=document.createElement("canvas");s.width=o,s.height=a;const c=s.getContext("2d");if(!c)return;null!=i.backgroundColor&&(c.fillStyle=i.backgroundColor,c.fillRect(0,0,o,a));const p=(i.transform.scale||1)*(i.transform.flipH?-1:1),d=(i.transform.scale||1)*(i.transform.flipV?-1:1),l=t.transformed;c.setTransform(p,0,0,d,l.size.width/2,l.size.height/2),c.translate(-n.x1/p,-n.y1/d),c.rotate((i.transform.rotate||0)*Math.PI/180),c.drawImage(l.image,-l.size.width/2,-l.size.height/2);const h={width:o,height:a,imagePosition:n,cropperPosition:Object.assign({},r)};i.containWithinAspectRatio&&(h.offsetImagePosition=this.getOffsetImagePosition(e,t,r,i));const m=this.getResizeRatio(o,a,i);return 1!==m&&(h.width=Math.round(o*m),h.height=i.maintainAspectRatio?Math.round(h.width/i.aspectRatio):Math.round(a*m),function(e,t,r){const i=e.width,n=e.height,o=i/(t=Math.round(t)),a=n/(r=Math.round(r)),s=Math.ceil(o/2),c=Math.ceil(a/2),p=e.getContext("2d");if(p){const d=p.getImageData(0,0,i,n),l=p.createImageData(t,r),h=d.data,m=l.data;for(let e=0;e<r;e++)for(let r=0;r<t;r++){const p=4*(r+e*t),d=e*a;let l=0,g=0,u=0,f=0,x=0,v=0,S=0;const y=Math.floor(r*o),M=Math.floor(e*a);let b=Math.ceil((r+1)*o),C=Math.ceil((e+1)*a);b=Math.min(b,i),C=Math.min(C,n);for(let e=M;e<C;e++){const t=Math.abs(d-e)/c,n=r*o,a=t*t;for(let r=y;r<b;r++){const t=Math.abs(n-r)/s,o=Math.sqrt(a+t*t);if(o>=1)continue;l=2*o*o*o-3*o*o+1;const c=4*(r+e*i);S+=l*h[c+3],u+=l,h[c+3]<255&&(l=l*h[c+3]/250),f+=l*h[c],x+=l*h[c+1],v+=l*h[c+2],g+=l}}m[p]=f/g,m[p+1]=x/g,m[p+2]=v/g,m[p+3]=S/u}e.width=t,e.height=r,p.putImageData(l,0,0)}}(s,h.width,h.height)),h.base64=s.toDataURL("image/"+i.format,this.getQuality(i)),h}getImagePosition(e,t,r,i){const n=t.transformed.size.width/e.nativeElement.offsetWidth,o={x1:Math.round(r.x1*n),y1:Math.round(r.y1*n),x2:Math.round(r.x2*n),y2:Math.round(r.y2*n)};return i.containWithinAspectRatio||(o.x1=Math.max(o.x1,0),o.y1=Math.max(o.y1,0),o.x2=Math.min(o.x2,t.transformed.size.width),o.y2=Math.min(o.y2,t.transformed.size.height)),o}getOffsetImagePosition(e,t,r,i){const n=t.transformed.size.width/e.nativeElement.offsetWidth;let o,a;(i.canvasRotation+t.exifTransform.rotate)%2?(o=(t.transformed.size.width-t.original.size.height)/2,a=(t.transformed.size.height-t.original.size.width)/2):(o=(t.transformed.size.width-t.original.size.width)/2,a=(t.transformed.size.height-t.original.size.height)/2);const s={x1:Math.round(r.x1*n)-o,y1:Math.round(r.y1*n)-a,x2:Math.round(r.x2*n)-o,y2:Math.round(r.y2*n)-a};return i.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,t.transformed.size.width),s.y2=Math.min(s.y2,t.transformed.size.height)),s}getResizeRatio(e,t,r){const i=r.resizeToWidth/e,n=r.resizeToHeight/t,o=new Array;r.resizeToWidth>0&&o.push(i),r.resizeToHeight>0&&o.push(n);const a=0===o.length?1:Math.min(...o);return a>1&&!r.onlyScaleDown?a:Math.min(a,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(c["\u0275\u0275defineInjectable"])({factory:function(){return new e},token:e,providedIn:"root"}),e})();class v{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=void 0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(e){Object.keys(e).filter(e=>e in this).forEach(t=>this[t]=e[t]),this.validateOptions()}setOptionsFromChanges(e){Object.keys(e).filter(e=>e in this).forEach(t=>this[t]=e[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}let S=(()=>{class e{constructor(){this.autoRotateSupported=new Promise(e=>{const t=new Image;t.onload=()=>{e(1===t.width&&2===t.height)},t.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}loadImageFile(e,t){return new Promise((r,i)=>{const n=new FileReader;n.onload=n=>{this.loadImage(n.target.result,e.type,t).then(r).catch(i)},n.readAsDataURL(e)})}loadImage(e,t,r){return this.isValidImageType(t)?this.loadBase64Image(e,r):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(e)}loadImageFromURL(e,t){return new Promise((r,i)=>{const n=new Image;n.onerror=()=>i,n.onload=()=>{const e=document.createElement("canvas"),i=e.getContext("2d");e.width=n.width,e.height=n.height,i.drawImage(n,0,0),this.loadBase64Image(e.toDataURL(),t).then(r)},n.crossOrigin="anonymous",n.src=e})}loadBase64Image(e,t){return new Promise((t,r)=>{const i=new Image;i.onload=()=>t({originalImage:i,originalBase64:e}),i.onerror=r,i.src=e}).then(e=>this.transformImageBase64(e,t))}transformImageBase64(e,t){return p(this,void 0,void 0,function*(){const r=yield this.autoRotateSupported,i=yield function(e){switch("string"==typeof e&&(e=function(e){const t=new DataView(function(e){e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");const t=atob(e),r=t.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer}(e));if(65496!=t.getUint16(0,!1))return-2;const r=t.byteLength;let i=2;for(;i<r;){if(t.getUint16(i+2,!1)<=8)return-1;const e=t.getUint16(i,!1);if(i+=2,65505==e){if(1165519206!=t.getUint32(i+=2,!1))return-1;const e=18761==t.getUint16(i+=6,!1);i+=t.getUint32(i+4,e);const r=t.getUint16(i,e);i+=2;for(let n=0;n<r;n++)if(274==t.getUint16(i+12*n,e))return t.getUint16(i+12*n+8,e)}else{if(65280!=(65280&e))break;i+=t.getUint16(i,!1)}}return-1}(e)),e){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(r?-1:e.originalBase64);return e.originalImage&&e.originalImage.complete?this.transformLoadedImage({original:{base64:e.originalBase64,image:e.originalImage,size:{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:i},t):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(e,t){return p(this,void 0,void 0,function*(){const r=t.canvasRotation+e.exifTransform.rotate,i={width:e.original.image.naturalWidth,height:e.original.image.naturalHeight};if(0===r&&!e.exifTransform.flip&&!t.containWithinAspectRatio)return{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},i)},transformed:{base64:e.original.base64,image:e.original.image,size:Object.assign({},i)},exifTransform:e.exifTransform};const n=this.getTransformedSize(i,e.exifTransform,t),o=document.createElement("canvas");o.width=n.width,o.height=n.height;const a=o.getContext("2d");a.setTransform(e.exifTransform.flip?-1:1,0,0,1,o.width/2,o.height/2),a.rotate(Math.PI*(r/2)),a.drawImage(e.original.image,-i.width/2,-i.height/2);const s=o.toDataURL(),c=yield this.loadImageFromBase64(s);return{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},i)},transformed:{base64:s,image:c,size:{width:c.width,height:c.height}},exifTransform:e.exifTransform}})}loadImageFromBase64(e){return new Promise((t,r)=>{const i=new Image;i.onload=()=>t(i),i.onerror=r,i.src=e})}getTransformedSize(e,t,r){const i=r.canvasRotation+t.rotate;if(r.containWithinAspectRatio){if(i%2){const t=e.height/r.aspectRatio;return{width:Math.max(e.height,e.width*r.aspectRatio),height:Math.max(e.width,t)}}{const t=e.width/r.aspectRatio;return{width:Math.max(e.width,e.height*r.aspectRatio),height:Math.max(e.height,t)}}}return i%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(c["\u0275\u0275defineInjectable"])({factory:function(){return new e},token:e,providedIn:"root"}),e})(),y=(()=>{class e{resetCropperPosition(e,t,r){const i=e.nativeElement;if(r.cropperStaticHeight&&r.cropperStaticWidth)t.x1=0,t.x2=i.offsetWidth>r.cropperStaticWidth?r.cropperStaticWidth:i.offsetWidth,t.y1=0,t.y2=i.offsetHeight>r.cropperStaticHeight?r.cropperStaticHeight:i.offsetHeight;else{const e=Math.min(r.cropperScaledMaxWidth,i.offsetWidth),n=Math.min(r.cropperScaledMaxHeight,i.offsetHeight);if(r.maintainAspectRatio)if(e/r.aspectRatio<n){t.x1=0,t.x2=e;const n=e/r.aspectRatio;t.y1=(i.offsetHeight-n)/2,t.y2=t.y1+n}else{t.y1=0,t.y2=n;const e=n*r.aspectRatio;t.x1=(i.offsetWidth-e)/2,t.x2=t.x1+e}else t.x1=0,t.x2=e,t.y1=0,t.y2=n}}move(e,t,r){const i=this.getClientX(e)-t.clientX,n=this.getClientY(e)-t.clientY;r.x1=t.x1+i,r.y1=t.y1+n,r.x2=t.x2+i,r.y2=t.y2+n}resize(e,t,r,i,n){const o=this.getClientX(e)-t.clientX,a=this.getClientY(e)-t.clientY;switch(t.position){case"left":r.x1=Math.min(Math.max(t.x1+o,r.x2-n.cropperScaledMaxWidth),r.x2-n.cropperScaledMinWidth);break;case"topleft":r.x1=Math.min(Math.max(t.x1+o,r.x2-n.cropperScaledMaxWidth),r.x2-n.cropperScaledMinWidth),r.y1=Math.min(Math.max(t.y1+a,r.y2-n.cropperScaledMaxHeight),r.y2-n.cropperScaledMinHeight);break;case"top":r.y1=Math.min(Math.max(t.y1+a,r.y2-n.cropperScaledMaxHeight),r.y2-n.cropperScaledMinHeight);break;case"topright":r.x2=Math.max(Math.min(t.x2+o,r.x1+n.cropperScaledMaxWidth),r.x1+n.cropperScaledMinWidth),r.y1=Math.min(Math.max(t.y1+a,r.y2-n.cropperScaledMaxHeight),r.y2-n.cropperScaledMinHeight);break;case"right":r.x2=Math.max(Math.min(t.x2+o,r.x1+n.cropperScaledMaxWidth),r.x1+n.cropperScaledMinWidth);break;case"bottomright":r.x2=Math.max(Math.min(t.x2+o,r.x1+n.cropperScaledMaxWidth),r.x1+n.cropperScaledMinWidth),r.y2=Math.max(Math.min(t.y2+a,r.y1+n.cropperScaledMaxHeight),r.y1+n.cropperScaledMinHeight);break;case"bottom":r.y2=Math.max(Math.min(t.y2+a,r.y1+n.cropperScaledMaxHeight),r.y1+n.cropperScaledMinHeight);break;case"bottomleft":r.x1=Math.min(Math.max(t.x1+o,r.x2-n.cropperScaledMaxWidth),r.x2-n.cropperScaledMinWidth),r.y2=Math.max(Math.min(t.y2+a,r.y1+n.cropperScaledMaxHeight),r.y1+n.cropperScaledMinHeight);break;case"center":const s=e.scale,c=Math.min(Math.max(n.cropperScaledMinWidth,Math.abs(t.x2-t.x1)*s),n.cropperScaledMaxWidth),p=Math.min(Math.max(n.cropperScaledMinHeight,Math.abs(t.y2-t.y1)*s),n.cropperScaledMaxHeight);r.x1=t.clientX-c/2,r.x2=t.clientX+c/2,r.y1=t.clientY-p/2,r.y2=t.clientY+p/2,r.x1<0?(r.x2-=r.x1,r.x1=0):r.x2>i.width&&(r.x1-=r.x2-i.width,r.x2=i.width),r.y1<0?(r.y2-=r.y1,r.y1=0):r.y2>i.height&&(r.y1-=r.y2-i.height,r.y2=i.height)}n.maintainAspectRatio&&this.checkAspectRatio(t.position,r,i,n)}checkAspectRatio(e,t,r,i){let n=0,o=0;switch(e){case"top":t.x2=t.x1+(t.y2-t.y1)*i.aspectRatio,n=Math.max(t.x2-r.width,0),o=Math.max(0-t.y1,0),(n>0||o>0)&&(t.x2-=o*i.aspectRatio>n?o*i.aspectRatio:n,t.y1+=o*i.aspectRatio>n?o:n/i.aspectRatio);break;case"bottom":t.x2=t.x1+(t.y2-t.y1)*i.aspectRatio,n=Math.max(t.x2-r.width,0),o=Math.max(t.y2-r.height,0),(n>0||o>0)&&(t.x2-=o*i.aspectRatio>n?o*i.aspectRatio:n,t.y2-=o*i.aspectRatio>n?o:n/i.aspectRatio);break;case"topleft":t.y1=t.y2-(t.x2-t.x1)/i.aspectRatio,n=Math.max(0-t.x1,0),o=Math.max(0-t.y1,0),(n>0||o>0)&&(t.x1+=o*i.aspectRatio>n?o*i.aspectRatio:n,t.y1+=o*i.aspectRatio>n?o:n/i.aspectRatio);break;case"topright":t.y1=t.y2-(t.x2-t.x1)/i.aspectRatio,n=Math.max(t.x2-r.width,0),o=Math.max(0-t.y1,0),(n>0||o>0)&&(t.x2-=o*i.aspectRatio>n?o*i.aspectRatio:n,t.y1+=o*i.aspectRatio>n?o:n/i.aspectRatio);break;case"right":case"bottomright":t.y2=t.y1+(t.x2-t.x1)/i.aspectRatio,n=Math.max(t.x2-r.width,0),o=Math.max(t.y2-r.height,0),(n>0||o>0)&&(t.x2-=o*i.aspectRatio>n?o*i.aspectRatio:n,t.y2-=o*i.aspectRatio>n?o:n/i.aspectRatio);break;case"left":case"bottomleft":t.y2=t.y1+(t.x2-t.x1)/i.aspectRatio,n=Math.max(0-t.x1,0),o=Math.max(t.y2-r.height,0),(n>0||o>0)&&(t.x1+=o*i.aspectRatio>n?o*i.aspectRatio:n,t.y2-=o*i.aspectRatio>n?o:n/i.aspectRatio);break;case"center":t.x2=t.x1+(t.y2-t.y1)*i.aspectRatio,t.y2=t.y1+(t.x2-t.x1)/i.aspectRatio;const e=Math.max(0-t.x1,0),a=Math.max(t.x2-r.width,0),s=Math.max(t.y2-r.height,0),c=Math.max(0-t.y1,0);(e>0||a>0||s>0||c>0)&&(t.x1+=s*i.aspectRatio>e?s*i.aspectRatio:e,t.x2-=c*i.aspectRatio>a?c*i.aspectRatio:a,t.y1+=c*i.aspectRatio>a?c:a/i.aspectRatio,t.y2-=s*i.aspectRatio>e?s:e/i.aspectRatio)}}getClientX(e){return(e.touches&&e.touches[0]?e.touches[0].clientX:e.clientX)||0}getClientY(e){return(e.touches&&e.touches[0]?e.touches[0].clientY:e.clientY)||0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(c["\u0275\u0275defineInjectable"])({factory:function(){return new e},token:e,providedIn:"root"}),e})(),M=(()=>{class e{constructor(e,t,r,i,n){this.cropService=e,this.cropperPositionService=t,this.loadImageService=r,this.sanitizer=i,this.cd=n,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.settings=new v,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.moveTypes=f,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new c.EventEmitter,this.startCropImage=new c.EventEmitter,this.imageLoaded=new c.EventEmitter,this.cropperReady=new c.EventEmitter,this.loadImageFailed=new c.EventEmitter,this.reset()}ngOnChanges(e){this.onChangesUpdateSettings(e),this.onChangesInputImage(e),this.loadedImage&&this.loadedImage.original.image.complete&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e)),(e.cropper||e.maintainAspectRatio||e.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(e.maintainAspectRatio||e.aspectRatio)?this.resetCropperPosition():e.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.base64),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){this.loadedImage&&(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const e=new this.Hammer(this.wrapper.nativeElement);e.get("pinch").set({enable:!0}),e.on("pinchmove",this.onPinch.bind(this)),e.on("pinchend",this.pinchStop.bind(this)),e.on("pinchstart",this.startPinch.bind(this))}else Object(c.isDevMode)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const e=this.sourceImage.nativeElement;this.maxSize.width===e.offsetWidth&&this.maxSize.height===e.offsetHeight||(this.cropper.x1=this.cropper.x1*e.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*e.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*e.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*e.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){e.key>="1"&&e.key<="9"&&(this.settings.stepSize=+e.key)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;const t=e.shiftKey?f.Resize:f.Move,r=e.altKey?function(e){switch(e){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}(e.key):function(e){switch(e){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}(e.key),i=function(e,t){switch(e){case"ArrowUp":return{clientX:0,clientY:-1*t};case"ArrowRight":return{clientX:t,clientY:0};case"ArrowDown":return{clientX:0,clientY:t};case"ArrowLeft":default:return{clientX:-1*t,clientY:0}}}(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},t,r),this.moveImg(i),this.moveStop()}startMove(e,t,r=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===f.Pinch||(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:t,position:r,clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e)},this.cropper))}startPinch(e){this.safeImgDataUrl&&(e.preventDefault&&e.preventDefault(),this.moveStart=Object.assign({active:!0,type:f.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===f.Move?(this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0)):this.moveStart.type===f.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===f.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const e=this.sourceImage.nativeElement;this.maxSize.width=e.offsetWidth,this.maxSize.height=e.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image){const e=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/e:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/e:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.loadedImage.transformed.image){this.startCropImage.emit();const e=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=e&&this.imageCropped.emit(e),e}return null}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](x),c["\u0275\u0275directiveInject"](y),c["\u0275\u0275directiveInject"](S),c["\u0275\u0275directiveInject"](d.DomSanitizer),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["image-cropper"]],viewQuery:function(e,t){if(1&e&&(c["\u0275\u0275viewQuery"](l,3),c["\u0275\u0275viewQuery"](h,1)),2&e){let e;c["\u0275\u0275queryRefresh"](e=c["\u0275\u0275loadQuery"]())&&(t.wrapper=e.first),c["\u0275\u0275queryRefresh"](e=c["\u0275\u0275loadQuery"]())&&(t.sourceImage=e.first)}},hostVars:4,hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("resize",function(){return t.onResize()},!1,c["\u0275\u0275resolveWindow"])("mousemove",function(e){return t.moveImg(e)},!1,c["\u0275\u0275resolveDocument"])("touchmove",function(e){return t.moveImg(e)},!1,c["\u0275\u0275resolveDocument"])("mouseup",function(){return t.moveStop()},!1,c["\u0275\u0275resolveDocument"])("touchend",function(){return t.moveStop()},!1,c["\u0275\u0275resolveDocument"]),2&e&&(c["\u0275\u0275styleProp"]("text-align",t.alignImage),c["\u0275\u0275classProp"]("disabled",t.disabled))},inputs:{format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[c["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",null,0),c["\u0275\u0275template"](2,m,2,5,"img",1),c["\u0275\u0275element"](3,"div",2),c["\u0275\u0275template"](4,u,3,15,"div",3),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275styleProp"]("background",t.imageVisible&&t.backgroundColor),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.safeImgDataUrl),c["\u0275\u0275advance"](1),c["\u0275\u0275styleProp"]("width",t.maxSize.width,"px")("height",t.maxSize.height,"px")("margin-left","center"===t.alignImage?t.marginLeft:null),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.imageVisible))},directives:[i.l],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[i.b]]}),e})();var C=r("tyNb");let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["produto-app-root"]],decls:1,vars:0,template:function(e,t){1&e&&c["\u0275\u0275element"](0,"router-outlet")},directives:[C.e],encapsulation:2}),e})();var E=r("JIr8"),w=r("lJxs"),I=r("Do2H"),z=r("tk/3");let R=(()=>{class e extends I.a{constructor(e){super(),this.http=e}obterTodos(){return this.http.get(this.UrlServiceV1+"produtos",super.ObterAuthHeaderJson()).pipe(Object(E.a)(super.serviceError))}obterPorId(e){return this.http.get(this.UrlServiceV1+"produtos/"+e,super.ObterAuthHeaderJson()).pipe(Object(E.a)(super.serviceError))}novoProduto(e){return this.http.post(this.UrlServiceV1+"produtos",e,super.ObterAuthHeaderJson()).pipe(Object(w.a)(super.extractData),Object(E.a)(super.serviceError))}atualizarProduto(e){return this.http.put(this.UrlServiceV1+"produtos/"+e.id,e,super.ObterAuthHeaderJson()).pipe(Object(w.a)(super.extractData),Object(E.a)(super.serviceError))}excluirProduto(e){return this.http.delete(this.UrlServiceV1+"produtos/"+e,super.ObterAuthHeaderJson()).pipe(Object(w.a)(super.extractData),Object(E.a)(super.serviceError))}obterFornecedores(){return this.http.get(this.UrlServiceV1+"fornecedores").pipe(Object(E.a)(super.serviceError))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](z.b))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();const P=function(e){return["/produtos/detalhes",e]},O=function(e){return["/produtos/editar",e]},k=function(e){return["/produtos/excluir",e]};function H(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275element"](2,"img",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"td"),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"currencyBrazil"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"td"),c["\u0275\u0275element"](11,"input",6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td",7),c["\u0275\u0275elementStart"](13,"a",8),c["\u0275\u0275element"](14,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](15,"\xa0 "),c["\u0275\u0275elementStart"](16,"a",1),c["\u0275\u0275element"](17,"span",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](18,"\xa0 "),c["\u0275\u0275elementStart"](19,"a",11),c["\u0275\u0275element"](20,"span",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate"]("src",e.imagem,c["\u0275\u0275sanitizeUrl"]),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.nome," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",e.nomeFornecedor," "),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](9,8,e.valor)," "),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("checked",e.ativo),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](10,P,e.id)),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](12,O,e.id)),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](14,k,e.id))}}const F=function(){return["/produtos/adicionar-novo"]};let V=(()=>{class e{constructor(e){this.produtoService=e}ngOnInit(){this.produtoService.obterTodos().subscribe(e=>this.produtos=e,e=>this.errorMessage)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](R))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-lista"]],decls:22,vars:3,consts:[[1,"container","main-container"],[1,"btn","btn-info",3,"routerLink"],[1,"table","table-hover"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[2,"width","70px","height","100px",3,"src"],["disabled","disabled","type","checkbox",1,"check-box",3,"checked"],[1,"text-right"],[1,"btn","btn-warning",3,"routerLink"],[1,"fa","fa-search"],[1,"fa","fa-pencil-alt"],[1,"btn","btn-danger",3,"routerLink"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h1"),c["\u0275\u0275text"](2,"Lista de Produtos"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](3,"hr"),c["\u0275\u0275elementStart"](4,"p"),c["\u0275\u0275elementStart"](5,"a",1),c["\u0275\u0275text"](6,"Novo Produto"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"table",2),c["\u0275\u0275elementStart"](8,"thead",3),c["\u0275\u0275elementStart"](9,"tr"),c["\u0275\u0275element"](10,"th"),c["\u0275\u0275elementStart"](11,"th"),c["\u0275\u0275text"](12," Nome "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"th"),c["\u0275\u0275text"](14," Fornecedor "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"th"),c["\u0275\u0275text"](16," Valor "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"th"),c["\u0275\u0275text"](18," Ativo? "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](19,"th"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"tbody"),c["\u0275\u0275template"](21,H,21,16,"tr",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction0"](2,F)),c["\u0275\u0275advance"](16),c["\u0275\u0275property"]("ngForOf",t.produtos))},directives:[C.c,i.k],pipes:[o.d],encapsulation:2}),e})();var _=r("xgIS"),W=r("VRyK"),B=r("zFJr"),T=r("cES+"),j=r("5eHb");function L(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e)}}function D(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",23),c["\u0275\u0275elementStart"](1,"h3",24),c["\u0275\u0275text"](2,"Opa! Alguma coisa n\xe3o deu certo:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ul"),c["\u0275\u0275template"](4,L,2,1,"li",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",e.errors)}}function Q(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",26),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275propertyInterpolate"]("value",e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.nome)}}function U(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",27),c["\u0275\u0275element"](1,"p",28),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.fornecedorId,c["\u0275\u0275sanitizeHtml"])}}function N(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",27),c["\u0275\u0275element"](1,"p",28),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.nome,c["\u0275\u0275sanitizeHtml"])}}function q(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",27),c["\u0275\u0275element"](1,"p",28),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.descricao,c["\u0275\u0275sanitizeHtml"])}}function Y(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275element"](1,"br"),c["\u0275\u0275text"](2),c["\u0275\u0275element"](3,"br"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.imagemNome)}}function X(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",27),c["\u0275\u0275element"](1,"p",28),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.imagem,c["\u0275\u0275sanitizeHtml"])}}function K(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",1),c["\u0275\u0275elementStart"](1,"div",29),c["\u0275\u0275elementStart"](2,"image-cropper",30),c["\u0275\u0275listener"]("imageCropped",function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().imageCropped(t)})("imageLoaded",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().imageLoaded()})("cropperReady",function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().cropperReady(t)})("loadImageFailed",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().loadImageFailed()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",29),c["\u0275\u0275element"](4,"img",31),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275styleProp"]("display",e.showCropper?null:"none"),c["\u0275\u0275property"]("imageChangedEvent",e.imageChangedEvent)("maintainAspectRatio",!1)("containWithinAspectRatio",e.containWithinAspectRatio)("aspectRatio",4/3)("resizeToWidth",256)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",e.canvasRotation)("transform",e.transform)("alignImage","left"),c["\u0275\u0275advance"](2),c["\u0275\u0275styleProp"]("border",e.croppedImage?"1px solid black":"none"),c["\u0275\u0275property"]("src",e.croppedImage,c["\u0275\u0275sanitizeUrl"])}}function G(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",27),c["\u0275\u0275element"](1,"p",28),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.valor,c["\u0275\u0275sanitizeHtml"])}}const J=function(e){return{"is-invalid":e}},$=function(e){return{mask:e}};let Z=(()=>{class e{constructor(e,t,r,i){this.fb=e,this.produtoService=t,this.router=r,this.toastr=i,this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={},this.errors=[],this.displayMessage={},this.MASKS=B.utilsBr.MASKS,this.formResult="",this.validationMessages={fornecedorId:{required:"Escolha um fornecedor"},nome:{required:"Informe o Nome",minlength:"M\xednimo de 2 caracteres",maxlength:"M\xe1ximo de 200 caracteres"},descricao:{required:"Informe a Descri\xe7\xe3o",minlength:"M\xednimo de 2 caracteres",maxlength:"M\xe1ximo de 1000 caracteres"},imagem:{required:"Informe a Imagem"},valor:{required:"Informe o Valor"}},this.genericValidator=new T.a(this.validationMessages)}ngOnInit(){this.produtoService.obterFornecedores().subscribe(e=>this.fornecedores=e),this.produtoForm=this.fb.group({fornecedorId:["",[n.Validators.required]],nome:["",[n.Validators.required,n.Validators.minLength(2),n.Validators.maxLength(200)]],descricao:["",[n.Validators.required,n.Validators.minLength(2),n.Validators.maxLength(1e3)]],imagem:["",[n.Validators.required]],valor:["",[n.Validators.required]],ativo:[!0]})}ngAfterViewInit(){let e=this.formInputElements.map(e=>Object(_.a)(e.nativeElement,"blur"));Object(W.a)(...e).subscribe(()=>{this.displayMessage=this.genericValidator.processarMensagens(this.produtoForm),this.mudancasNaoSalvas=!0})}adicionarProduto(){this.produtoForm.dirty&&this.produtoForm.valid&&(this.produto=Object.assign({},this.produto,this.produtoForm.value),this.produto.imagemUpload=this.croppedImage.split(",")[1],this.produto.imagem=this.imagemNome,this.produto.valor=class{static StringParaDecimal(e){return null===e?0:(e=(e=e.replace(/\./g,"")).replace(/,/g,"."),parseFloat(e))}static DecimalParaString(e){var t=e?e.toString().replace(".",","):null;if(t){var r=t.split(",");r.length>1&&1===r[1].length&&(t+="0")}return t}}.StringParaDecimal(this.produto.valor),this.produtoService.novoProduto(this.produto).subscribe(e=>{this.processarSucesso(e)},e=>{this.processarFalha(e)}),this.mudancasNaoSalvas=!1)}processarSucesso(e){this.produtoForm.reset(),this.errors=[];let t=this.toastr.success("Produto cadastrado com sucesso!","Sucesso!");t&&t.onHidden.subscribe(()=>{this.router.navigate(["/produtos/listar-todos"])})}processarFalha(e){this.errors=e.error.errors,this.toastr.error("Ocorreu um erro!","Opa :(")}fileChangeEvent(e){this.imageChangedEvent=e,this.imagemNome=e.currentTarget.files[0].name}imageCropped(e){this.croppedImage=e.base64}imageLoaded(){this.showCropper=!0}cropperReady(e){console.log("Cropper ready",e)}loadImageFailed(){this.errors.push("O formato do arquivo "+this.imagemNome+" n\xe3o \xe9 aceito.")}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](n.FormBuilder),c["\u0275\u0275directiveInject"](R),c["\u0275\u0275directiveInject"](C.b),c["\u0275\u0275directiveInject"](j.b))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-novo"]],viewQuery:function(e,t){if(1&e&&c["\u0275\u0275viewQuery"](n.FormControlName,1,c.ElementRef),2&e){let e;c["\u0275\u0275queryRefresh"](e=c["\u0275\u0275loadQuery"]())&&(t.formInputElements=e)}},decls:50,vars:29,consts:[[1,"container","main-container"],[1,"row"],[1,"col-md-10"],["enctype","multipart/form-data",3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"control-label"],["id","fornecedorId","formControlName","fornecedorId",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["id","nome","type","text","placeholder","Nome (requerido)","formControlName","nome",1,"form-control",3,"ngClass"],["cols","40","rows","5","maxlength","1000","id","descricao","placeholder","Descri\xe7\xe3o (requerido)","formControlName","descricao",1,"form-control",3,"ngClass"],[1,"custom-file"],["type","file","accept","image/jpeg,image/png,image/gif","id","imagem","formControlName","imagem",1,"custom-file-input",3,"ngClass","change"],["data-browse","Procurar",1,"custom-file-label",2,"width","400px"],[4,"ngIf"],["class","row",4,"ngIf"],["id","valor","type","text","placeholder","Valor (requerido)","formControlName","valor",1,"form-control",3,"textMask","ngClass"],[1,"form-group","form-check"],[1,"form-check-label"],["type","checkbox","id","ativo","formControlName","ativo","name","ativo","value","true",1,"form-check-input"],["type","submit","value","Cadastrar",1,"btn","btn-primary",3,"disabled"],["href","/produtos/listar-todos",1,"btn","btn-info"],[1,"alert","alert-danger"],["id","msgRetorno"],[4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],[3,"innerHTML"],[1,"col","col-md-6"],["format","png",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[3,"src"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h3"),c["\u0275\u0275text"](2,"Novo Produto "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](3,"hr"),c["\u0275\u0275elementStart"](4,"div",1),c["\u0275\u0275elementStart"](5,"div",2),c["\u0275\u0275elementStart"](6,"form",3),c["\u0275\u0275listener"]("ngSubmit",function(){return t.adicionarProduto()}),c["\u0275\u0275template"](7,D,5,1,"div",4),c["\u0275\u0275elementStart"](8,"div",5),c["\u0275\u0275elementStart"](9,"label",6),c["\u0275\u0275text"](10,"Fornecedor"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"select",7),c["\u0275\u0275template"](12,Q,2,2,"option",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](13,U,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",5),c["\u0275\u0275elementStart"](15,"label",6),c["\u0275\u0275text"](16,"Nome"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div"),c["\u0275\u0275element"](18,"input",10),c["\u0275\u0275template"](19,N,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",5),c["\u0275\u0275elementStart"](21,"label",6),c["\u0275\u0275text"](22,"Descri\xe7\xe3o"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div"),c["\u0275\u0275element"](24,"textarea",11),c["\u0275\u0275template"](25,q,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",5),c["\u0275\u0275elementStart"](27,"label",6),c["\u0275\u0275text"](28,"Imagem do Produto"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",12),c["\u0275\u0275elementStart"](30,"input",13),c["\u0275\u0275listener"]("change",function(e){return t.fileChangeEvent(e)}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](31,"label",14),c["\u0275\u0275template"](32,Y,4,1,"span",15),c["\u0275\u0275template"](33,X,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](34,K,5,16,"div",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"div",5),c["\u0275\u0275elementStart"](36,"label",6),c["\u0275\u0275text"](37,"Valor"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"div"),c["\u0275\u0275element"](39,"input",17),c["\u0275\u0275template"](40,G,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"div",18),c["\u0275\u0275elementStart"](42,"label",19),c["\u0275\u0275element"](43,"input",20),c["\u0275\u0275text"](44," Ativo? "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](45,"div",5),c["\u0275\u0275element"](46,"input",21),c["\u0275\u0275text"](47,"\xa0 "),c["\u0275\u0275elementStart"](48,"a",22),c["\u0275\u0275text"](49,"Voltar"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("formGroup",t.produtoForm),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.errors.length>0),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](17,J,t.displayMessage.fornecedorId)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.fornecedores),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.fornecedorId),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](19,J,t.displayMessage.nome)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.nome),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](21,J,t.displayMessage.descricao)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.descricao),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](23,J,t.displayMessage.imagem)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.imagemNome),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.imagem),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.imagemNome),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("textMask",c["\u0275\u0275pureFunction1"](25,$,t.MASKS.number.textMask))("ngClass",c["\u0275\u0275pureFunction1"](27,J,t.displayMessage.valor)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.valor),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("disabled",!t.produtoForm.valid))},directives:[n["\u0275angular_packages_forms_forms_ba"],n.NgControlStatusGroup,n.FormGroupDirective,i.l,n.SelectControlValueAccessor,n.NgControlStatus,n.FormControlName,i.j,i.k,n.DefaultValueAccessor,n.MaxLengthValidator,a.MaskedInputDirective,n.CheckboxControlValueAccessor,n.NgSelectOption,n["\u0275angular_packages_forms_forms_z"],M],encapsulation:2}),e})();function ee(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li"),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e)}}function te(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",21),c["\u0275\u0275elementStart"](1,"h3",22),c["\u0275\u0275text"](2,"Opa! Alguma coisa n\xe3o deu certo:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ul"),c["\u0275\u0275template"](4,ee,2,1,"li",23),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",e.errors)}}function re(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",24),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275propertyInterpolate"]("value",e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.nome)}}function ie(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",25),c["\u0275\u0275element"](1,"p",26),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.fornecedorId,c["\u0275\u0275sanitizeHtml"])}}function ne(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",25),c["\u0275\u0275element"](1,"p",26),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.nome,c["\u0275\u0275sanitizeHtml"])}}function oe(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",25),c["\u0275\u0275element"](1,"p",26),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.descricao,c["\u0275\u0275sanitizeHtml"])}}function ae(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",25),c["\u0275\u0275element"](1,"p",26),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.imagem,c["\u0275\u0275sanitizeHtml"])}}function se(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",25),c["\u0275\u0275element"](1,"p",26),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("innerHTML",e.displayMessage.valor,c["\u0275\u0275sanitizeHtml"])}}const ce=function(e){return{"is-invalid":e}},pe=function(e){return{mask:e}};let de=(()=>{class e{constructor(e,t,r,i,n){this.fb=e,this.produtoService=t,this.router=r,this.route=i,this.toastr=n,this.errors=[],this.displayMessage={},this.MASKS=B.utilsBr.MASKS,this.formResult="",this.validationMessages={fornecedorId:{required:"Escolha um fornecedor"},nome:{required:"Informe o Nome",minlength:"M\xednimo de 2 caracteres",maxlength:"M\xe1ximo de 200 caracteres"},descricao:{required:"Informe a Descri\xe7\xe3o",minlength:"M\xednimo de 2 caracteres",maxlength:"M\xe1ximo de 1000 caracteres"},imagem:{required:"Informe a Imagem"},valor:{required:"Informe o Valor"}},this.genericValidator=new T.a(this.validationMessages),this.produto=this.route.snapshot.data.produto}ngOnInit(){this.produtoService.obterFornecedores().subscribe(e=>this.fornecedores=e),this.produtoForm=this.fb.group({fornecedorId:["",[n.Validators.required]],nome:["",[n.Validators.required,n.Validators.minLength(2),n.Validators.maxLength(200)]],descricao:["",[n.Validators.required,n.Validators.minLength(2),n.Validators.maxLength(1e3)]],imagem:[""],valor:["",[n.Validators.required]],ativo:[0]}),this.produtoForm.patchValue({fornecedorId:this.produto.fornecedorId,id:this.produto.id,nome:this.produto.nome,descricao:this.produto.descricao,ativo:this.produto.ativo,valor:this.produto.valor})}ngAfterViewInit(){let e=this.formInputElements.map(e=>Object(_.a)(e.nativeElement,"blur"));Object(W.a)(...e).subscribe(()=>{this.displayMessage=this.genericValidator.processarMensagens(this.produtoForm),this.mudancasNaoSalvas=!0})}editarProduto(){this.produtoForm.dirty&&this.produtoForm.valid&&(this.produto=Object.assign({},this.produto,this.produtoForm.value),this.produtoService.atualizarProduto(this.produto).subscribe(e=>{this.processarSucesso(e)},e=>{this.processarFalha(e)}),this.mudancasNaoSalvas=!1)}processarSucesso(e){this.produtoForm.reset(),this.errors=[];let t=this.toastr.success("Produto editado com sucesso!","Sucesso!");t&&t.onHidden.subscribe(()=>{this.router.navigate(["/produtos/listar-todos"])})}processarFalha(e){this.errors=e.error.errors,this.toastr.error("Ocorreu um erro!","Opa :(")}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](n.FormBuilder),c["\u0275\u0275directiveInject"](R),c["\u0275\u0275directiveInject"](C.b),c["\u0275\u0275directiveInject"](C.a),c["\u0275\u0275directiveInject"](j.b))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-editar"]],viewQuery:function(e,t){if(1&e&&c["\u0275\u0275viewQuery"](n.FormControlName,1,c.ElementRef),2&e){let e;c["\u0275\u0275queryRefresh"](e=c["\u0275\u0275loadQuery"]())&&(t.formInputElements=e)}},decls:48,vars:28,consts:[[1,"container","main-container"],[1,"row"],[1,"col-md-10"],["enctype","multipart/form-data",3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],[1,"control-label"],["id","fornecedorId","formControlName","fornecedorId",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["id","nome","type","text","placeholder","Nome (requerido)","formControlName","nome",1,"form-control",3,"ngClass"],["cols","40","rows","5","maxlength","1000","id","descricao","placeholder","Descri\xe7\xe3o (requerido)","formControlName","descricao",1,"form-control",3,"ngClass"],[1,"custom-file"],["type","file","id","imagem","formControlName","imagem",1,"custom-file-input",3,"ngClass"],["data-browse","Procurar",1,"custom-file-label",2,"width","400px"],["id","valor","type","text","placeholder","Valor (requerido)","formControlName","valor",1,"form-control",3,"textMask","ngClass"],[1,"form-group","form-check"],[1,"form-check-label"],["type","checkbox","id","ativo","formControlName","ativo","name","ativo","value","true",1,"form-check-input"],["type","submit","value","Editar",1,"btn","btn-primary",3,"disabled"],["href","/produtos/listar-todos",1,"btn","btn-info"],[1,"alert","alert-danger"],["id","msgRetorno"],[4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],[3,"innerHTML"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h3"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](3,"hr"),c["\u0275\u0275elementStart"](4,"div",1),c["\u0275\u0275elementStart"](5,"div",2),c["\u0275\u0275elementStart"](6,"form",3),c["\u0275\u0275listener"]("ngSubmit",function(){return t.editarProduto()}),c["\u0275\u0275template"](7,te,5,1,"div",4),c["\u0275\u0275elementStart"](8,"div",5),c["\u0275\u0275elementStart"](9,"label",6),c["\u0275\u0275text"](10,"Fornecedor"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"select",7),c["\u0275\u0275template"](12,re,2,2,"option",8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](13,ie,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",5),c["\u0275\u0275elementStart"](15,"label",6),c["\u0275\u0275text"](16,"Nome"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div"),c["\u0275\u0275element"](18,"input",10),c["\u0275\u0275template"](19,ne,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"div",5),c["\u0275\u0275elementStart"](21,"label",6),c["\u0275\u0275text"](22,"Descri\xe7\xe3o"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"div"),c["\u0275\u0275element"](24,"textarea",11),c["\u0275\u0275template"](25,oe,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"div",5),c["\u0275\u0275elementStart"](27,"label",6),c["\u0275\u0275text"](28,"Imagem do Produto"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",12),c["\u0275\u0275element"](30,"input",13),c["\u0275\u0275element"](31,"label",14),c["\u0275\u0275template"](32,ae,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"div",5),c["\u0275\u0275elementStart"](34,"label",6),c["\u0275\u0275text"](35,"Valor"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div"),c["\u0275\u0275element"](37,"input",15),c["\u0275\u0275template"](38,se,2,1,"span",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"div",16),c["\u0275\u0275elementStart"](40,"label",17),c["\u0275\u0275element"](41,"input",18),c["\u0275\u0275text"](42," Ativo? "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](43,"div",5),c["\u0275\u0275element"](44,"input",19),c["\u0275\u0275text"](45,"\xa0 "),c["\u0275\u0275elementStart"](46,"a",20),c["\u0275\u0275text"](47,"Voltar"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("Editar Produto - ",t.produto.nome,""),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("formGroup",t.produtoForm),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.errors.length>0),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](16,ce,t.displayMessage.fornecedorId)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",t.fornecedores),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.fornecedorId),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](18,ce,t.displayMessage.nome)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.nome),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](20,ce,t.displayMessage.descricao)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.descricao),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](22,ce,t.displayMessage.imagem)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.displayMessage.imagem),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("textMask",c["\u0275\u0275pureFunction1"](24,pe,t.MASKS.number.textMask))("ngClass",c["\u0275\u0275pureFunction1"](26,ce,t.displayMessage.valor)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.displayMessage.valor),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("disabled",!t.produtoForm.valid))},directives:[n["\u0275angular_packages_forms_forms_ba"],n.NgControlStatusGroup,n.FormGroupDirective,i.l,n.SelectControlValueAccessor,n.NgControlStatus,n.FormControlName,i.j,i.k,n.DefaultValueAccessor,n.MaxLengthValidator,a.MaskedInputDirective,n.CheckboxControlValueAccessor,n.NgSelectOption,n["\u0275angular_packages_forms_forms_z"]],encapsulation:2}),e})();const le=function(e){return["/produtos/editar",e]};let he=(()=>{class e{constructor(e){this.route=e,this.produto=this.route.snapshot.data.produto}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](C.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-detalhes"]],decls:43,vars:16,consts:[[1,"container","main-container"],[1,"row"],[1,"col-md-4"],[2,"width","300px","height","428px",3,"src"],[1,"col-md-6"],["disabled","disabled","type","checkbox",1,"check-box",3,"checked"],[1,"btn","btn-warning",3,"routerLink"],["href","javascript:window.history.back();",1,"btn","btn-info"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h4"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](3,"br"),c["\u0275\u0275elementStart"](4,"h5"),c["\u0275\u0275text"](5,"Voc\xea tem certeza disso?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",1),c["\u0275\u0275elementStart"](7,"div",2),c["\u0275\u0275element"](8,"img",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",4),c["\u0275\u0275elementStart"](10,"dl"),c["\u0275\u0275elementStart"](11,"dt"),c["\u0275\u0275text"](12," Fornecedor "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"dd"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"dt"),c["\u0275\u0275text"](16," Nome "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"dd"),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"dt"),c["\u0275\u0275text"](20," Descri\xe7\xe3o "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"dd"),c["\u0275\u0275text"](22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"dt"),c["\u0275\u0275text"](24," Valor "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"dd"),c["\u0275\u0275text"](26),c["\u0275\u0275pipe"](27,"currencyBrazil"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"dt"),c["\u0275\u0275text"](29," DataCadastro "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"dd"),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"dt"),c["\u0275\u0275text"](34," Ativo? "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"dd"),c["\u0275\u0275element"](36,"input",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div"),c["\u0275\u0275elementStart"](38,"a",6),c["\u0275\u0275text"](39,"Editar"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](40,"\xa0 "),c["\u0275\u0275elementStart"](41,"a",7),c["\u0275\u0275text"](42,"Voltar"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("Excluir ",t.produto.nome," "),c["\u0275\u0275advance"](6),c["\u0275\u0275propertyInterpolate"]("src",t.produto.imagem,c["\u0275\u0275sanitizeUrl"]),c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate1"](" ",t.produto.nomeFornecedor," "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" ",t.produto.nome," "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" ",t.produto.descricao," "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](27,9,t.produto.valor)," "),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](32,11,t.produto.dataCadastro,"dd/MM/yyyy")," "),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("checked",t.produto.ativo),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](14,le,t.produto.id)))},directives:[C.c],pipes:[o.d,i.d],encapsulation:2}),e})(),me=(()=>{class e{constructor(e,t,r,i){this.produtoService=e,this.route=t,this.router=r,this.toastr=i,this.produto=this.route.snapshot.data.produto}excluirProduto(){this.produtoService.excluirProduto(this.produto.id).subscribe(e=>{this.sucessoExclusao(e)},()=>{this.falha()})}sucessoExclusao(e){const t=this.toastr.success("Produto excluido com Sucesso!","Good bye :D");t&&t.onHidden.subscribe(()=>{this.router.navigate(["/produtos/listar-todos"])})}falha(){this.toastr.error("Houve um erro no processamento!","Ops! :(")}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](R),c["\u0275\u0275directiveInject"](C.a),c["\u0275\u0275directiveInject"](C.b),c["\u0275\u0275directiveInject"](j.b))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-excluir"]],decls:43,vars:13,consts:[[1,"container","main-container"],[1,"row"],[1,"col-md-4"],[2,"width","300px","height","428px",3,"src"],[1,"col-md-6"],["disabled","disabled","type","checkbox",1,"check-box",3,"checked"],["href","javascript:void(0)",1,"btn","btn-danger",3,"click"],["href","javascript:window.history.back();",1,"btn","btn-info"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"h4"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](3,"br"),c["\u0275\u0275elementStart"](4,"h5"),c["\u0275\u0275text"](5,"Voc\xea tem certeza disso?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",1),c["\u0275\u0275elementStart"](7,"div",2),c["\u0275\u0275element"](8,"img",3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",4),c["\u0275\u0275elementStart"](10,"dl"),c["\u0275\u0275elementStart"](11,"dt"),c["\u0275\u0275text"](12," Fornecedor "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"dd"),c["\u0275\u0275text"](14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"dt"),c["\u0275\u0275text"](16," Nome "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"dd"),c["\u0275\u0275text"](18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"dt"),c["\u0275\u0275text"](20," Descri\xe7\xe3o "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"dd"),c["\u0275\u0275text"](22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](23,"dt"),c["\u0275\u0275text"](24," Valor "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"dd"),c["\u0275\u0275text"](26),c["\u0275\u0275pipe"](27,"currencyBrazil"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"dt"),c["\u0275\u0275text"](29," DataCadastro "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"dd"),c["\u0275\u0275text"](31),c["\u0275\u0275pipe"](32,"date"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"dt"),c["\u0275\u0275text"](34," Ativo? "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"dd"),c["\u0275\u0275element"](36,"input",5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](37,"div"),c["\u0275\u0275elementStart"](38,"a",6),c["\u0275\u0275listener"]("click",function(){return t.excluirProduto()}),c["\u0275\u0275text"](39,"Excluir"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275text"](40,"\xa0 "),c["\u0275\u0275elementStart"](41,"a",7),c["\u0275\u0275text"](42,"Voltar"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"]("Excluir ",t.produto.nome," "),c["\u0275\u0275advance"](6),c["\u0275\u0275propertyInterpolate"]("src",t.produto.imagem,c["\u0275\u0275sanitizeUrl"]),c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate1"](" ",t.produto.nomeFornecedor," "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" ",t.produto.nome," "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" ",t.produto.descricao," "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](27,8,t.produto.valor)," "),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind2"](32,10,t.produto.dataCadastro,"dd/MM/yyyy")," "),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("checked",t.produto.ativo))},pipes:[o.d,i.d],encapsulation:2}),e})(),ge=(()=>{class e{constructor(e){this.produtoService=e}resolve(e){return this.produtoService.obterPorId(e.params.id)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](R))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var ue=r("hEgY");let fe=(()=>{class e{constructor(e){this.router=e,this.localStorageUtils=new ue.a}canDeactivate(e){return!e.mudancasNaoSalvas||window.confirm("Tem certeza que deseja abandonar o preenchimento do formulario?")}canActivate(e,t){this.localStorageUtils.obterTokenUsuario()||this.router.navigate(["/conta/login/"],{queryParams:{returnUrl:this.router.url}});let r=this.localStorageUtils.obterUsuario();if(void 0!==e.data[0]){let t=e.data[0].claim;if(t){r.claims||this.navegarAcessoNegado();let e=r.claims.find(e=>e.type===t.nome);e||this.navegarAcessoNegado(),e.value.includes(t.valor)||this.navegarAcessoNegado()}}return!0}navegarAcessoNegado(){this.router.navigate(["/acesso-negado"])}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](C.b))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();const xe=[{path:"",component:A,children:[{path:"listar-todos",component:V},{path:"adicionar-novo",component:Z,canDeactivate:[fe],canActivate:[fe],data:[{claim:{nome:"Produto",valor:"Adicionar"}}]},{path:"editar/:id",component:de,canActivate:[fe],data:[{claim:{nome:"Produto",valor:"Atualizar"}}],resolve:{produto:ge}},{path:"detalhes/:id",component:he,resolve:{produto:ge}},{path:"excluir/:id",component:me,canActivate:[fe],data:[{claim:{nome:"Produto",valor:"Excluir"}}],resolve:{produto:ge}}]}];let ve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[C.d.forChild(xe)],C.d]}),e})(),Se=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({providers:[R,ge,fe],imports:[[i.b,ve,o.b,a.TextMaskModule,s.b,n.FormsModule,n.ReactiveFormsModule,b]]}),e})()}}]);